<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="theme-color" content="#000">
        <meta name="application-name" content="{{ page.title | default: 'PayEx Design Guide theme for Jekyll' }}">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="apple-mobile-web-app-title" content="{{ page.title | default: 'PayEx Design Guide theme for Jekyll' }}">
        <meta name="msapplication-TileColor" content="#000">
        <meta name="msapplication-TileImage" content="{{ page.design_guide.base_url }}/icons/mstile-144x144.png">
        <title>{{ page.title | default: "PayEx Design Guide theme for Jekyll" }}</title>
        <link rel="stylesheet" href="{{ page.design_guide.version_url }}/styles/dg-style.css" />
        <link rel="stylesheet" href="{{ '/assets/css/swedbank-pay-design-guide-theme.css' | relative_url }}" />
        <link rel="stylesheet" href="{{ '/assets/css/prism.css' | relative_url }}" />
        <link rel="shortcut icon" href="{{ page.design_guide.base_url }}/icons/favicon.ico">
        <link rel="icon" type="image/png" sizes="16x16" href="{{ page.design_guide.base_url }}/icons/favicon-16x16.png">
        <link rel="icon" type="image/png" sizes="32x32" href="{{ page.design_guide.base_url }}/icons/favicon-32x32.png">
        <link rel="apple-touch-icon" sizes="57x57" href="{{ page.design_guide.base_url }}/icons/apple-touch-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="60x60" href="{{ page.design_guide.base_url }}/icons/apple-touch-icon-60x60.png">
        <link rel="apple-touch-icon" sizes="72x72" href="{{ page.design_guide.base_url }}/icons/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="{{ page.design_guide.base_url }}/icons/apple-touch-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="{{ page.design_guide.base_url }}/icons/apple-touch-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="{{ page.design_guide.base_url }}/icons/apple-touch-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="{{ page.design_guide.base_url }}/icons/apple-touch-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="{{ page.design_guide.base_url }}/icons/apple-touch-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="167x167" href="{{ page.design_guide.base_url }}/icons/apple-touch-icon-167x167.png">
        <link rel="apple-touch-icon" sizes="180x180" href="{{ page.design_guide.base_url }}/icons/apple-touch-icon-180x180.png">
        <link rel="apple-touch-icon" sizes="1024x1024" href="{{ page.design_guide.base_url }}/icons/apple-touch-icon-1024x1024.png">
        <link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 1)" href="{{ page.design_guide.base_url }}/icons/apple-touch-startup-image-320x460.png">
        <link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 480px) and (-webkit-device-pixel-ratio: 2)" href="{{ page.design_guide.base_url }}/icons/apple-touch-startup-image-640x920.png">
        <link rel="apple-touch-startup-image" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2)" href="{{ page.design_guide.base_url }}/icons/apple-touch-startup-image-640x1096.png">
        <link rel="apple-touch-startup-image" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2)" href="{{ page.design_guide.base_url }}/icons/apple-touch-startup-image-750x1294.png">
        <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 3)" href="{{ page.design_guide.base_url }}/icons/apple-touch-startup-image-1182x2208.png">
        <link rel="apple-touch-startup-image" media="(device-width: 414px) and (device-height: 736px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 3)" href="{{ page.design_guide.base_url }}/icons/apple-touch-startup-image-1242x2148.png">
        <link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 1)" href="{{ page.design_guide.base_url }}/icons/apple-touch-startup-image-748x1024.png">
        <link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 1)" href="{{ page.design_guide.base_url }}/icons/apple-touch-startup-image-768x1004.png">
        <link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: landscape) and (-webkit-device-pixel-ratio: 2)" href="{{ page.design_guide.base_url }}/icons/apple-touch-startup-image-1496x2048.png">
        <link rel="apple-touch-startup-image" media="(device-width: 768px) and (device-height: 1024px) and (orientation: portrait) and (-webkit-device-pixel-ratio: 2)" href="{{ page.design_guide.base_url }}/icons/apple-touch-startup-image-1536x2008.png">
        <link rel="icon" type="image/png" sizes="228x228" href="{{ page.design_guide.base_url }}/icons/coast-228x228.png">
        <script src="{{ '/assets/js/mermaid.min.js' | relative_url }}"></script>
    </head>
    <body>
        <div id="designguide">
            <header class="topbar topbar-md-wide designguide-header">
                <button type="button" class="topbar-btn"><i class="material-icons topbar-btn-icon">menu</i></button>
                <a href="{{ site.url }}" class="topbar-logo"><img src="{{ page.design_guide.version_url }}/img/swedbankpay-logo.svg" alt="logo"></a>
                <nav class="topbar-nav">
                    <div class="topbar-link-container">
                        <button type="button" class="topbar-close"><i class="material-icons">close</i></button>

                        {% assign site_url = "/" | relative_url %}
                        {% assign page_url = page.url | remove: '.html' %}

                        {% comment %}
                        TODO: Enumerate pages through site.pages instead of hard coded in _config.yml.
                              Requires a bit sophisticated logic to differ between topbar and sidebar
                              pages as well as support for page/menu hierarchies.
                        {% for page in site.pages %}
                        {% unless page.dir contains 'assets/' %}
                        * {{ page.title }}
                        {% endunless %}
                        {% endfor %}
                        {% endcomment %}

                        <a {% if page_url == site_url %} aria-current="page" class="active" {% endif %} href="{{ site_url }}"><span>Home</span></a>

                        {% for nav in page.topbar.navigation %}
                            {% assign nav_url = nav.url | relative_url %}
                            <a {% if page_url == nav_url %} aria-current="page" class="active" {% endif %} href="{{ nav_url }}"><span>{{ nav.title }}</span></a>
                        {% endfor %}

                        <div class="topbar-info topbar-link-right">
                            <div class="topbar-info-contact">
                                <a href="{{ site.github.repository_url }}" target="_blank" rel="noopener noreferrer">
                                    <svg aria-labelledby="simpleicons-github-icon" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <title id="simpleicons-github-icon">GitHub icon</title>
                                        <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" />
                                    </svg>
                                </a>
                            </div>
                        </div>
                    </div>
                </nav>
            </header>

            <div class="documentation">
                <div class="row">
                    <div class="col-xxl-2 col-md-3">
                        <div class="doc-sidebar">
                            {% if page.sidebar.search.enabled == true %}
                            <form class="doc-search"><input type="text" class="form-control" name="designguide-search" placeholder="Search..." autocomplete="off"></form>
                            {% endif %}

                            {% if page.sidebar.navigation != nil and page.sidebar.navigation != empty %}
                            <nav class="documentation-nav">
                                {% for group in page.sidebar.navigation %}
                                {% comment %}
                                TODO: Make "class='active'" conditional on whether one of the group's nav items are active or not
                                {% endcomment %}
                                <div class="nav-group active">
                                        <div class="nav-heading">
                                            <i class="material-icons">keyboard_arrow_right</i>
                                            <span>{{ group.title }}</span>
                                        </div>

                                        {% if group.items != nil and group.items != empty %}
                                        <ul>
                                        {% for nav in group.items %}
                                            {% assign nav_url = nav.url | relative_url %}
                                            <li><a {% if page_url == nav_url %} aria-current="page" class="active" {% endif %} href="{{ nav_url }}"><span>{{ nav.title }}</span></a></li>
                                        {% endfor %}
                                        </ul>
                                        {% endif %}
                                    </div>
                                    {% endfor %}
                            </nav>
                            {% endif %}
                        </div>
                    </div>

                    <main class="doc-view col-xxl-10 col-md-9">
                        <div class="doc-container">
                            <h1>{{ page.title | default: "Swedbank Pay Design Guide theme for Jekyll" }}</h1>
                            <div class="row">
                                <div class="doc-body col-lg-10">
                                    {% include anchor_headings.html html=content anchorClass='header-anchor' %}
                                </div>

                                <div class="col-2 d-none d-lg-block">
                                    <div class="doc-toc">
                                        {% include toc.html html=content h_max=1 item_class='toc-%level%' %}
                                    </div>
                                </div>            
                            </div>
                        </div>
                    </main>
                </div>
            </div>

            <footer class="page-footer"><p class="page-footer-rights">© Swedbank Pay</p></footer>
        </div>

        <script src="{{ page.design_guide.version_url }}/scripts/dg.js"></script>
        <script src="{{ '/assets/js/prism.js' | relative_url }}" data-manual></script>
        <script>
            (function(){
                if (typeof self === 'undefined' || !self.Prism || !self.document || !document.querySelector) {
                    return;
                }

                var preElements = document.querySelectorAll('.highlighter-rouge:not(.language-mermaid) pre.highlight, code[class*="language"]:not(.language-mermaid)');

                console.log(preElements);
                
                // TODO: This seems to performs like ass and requires maintenance to get working.
                //       Follow up on https://github.com/PrismJS/prism/issues/2068 to figure out a better way to do this.
                for (var preElement of preElements) {
                    Prism.highlightElement(preElement, false);
                }
                
                mermaid.initialize({ startOnLoad: true, securityLevel: 'loose' });
                mermaid.init(undefined, 'code.language-mermaid');
            })();

        </script>
    </body>
</html>
